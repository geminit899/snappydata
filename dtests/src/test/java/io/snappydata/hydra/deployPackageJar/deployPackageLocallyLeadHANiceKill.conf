hydra.Prms-testRequirement = "Test to verify lead HA with deploy package feature using --package option (visibility local to Job)";
hydra.Prms-testDescription = "This is a good test case.
This test starts the snappy cluster in embedded mode. Execute the xml file processing job with databricks xml third part library.
Use the --package option in deploy jar feature so deployed package are visible to job only. Here we kill the lead node gracefully (i.e. NICE Kill)";

INCLUDE $JTESTS/io/snappydata/hydra/northwind/startDualModeCluster.conf;

INITTASK    taskClass   = util.StopStartVMs  taskMethod = StopStart_initTask
            threadGroups = snappyThreads, locatorThreads, snappyStoreThreads, leadThreads;

INITTASK    taskClass   = io.snappydata.hydra.cluster.SnappyTest taskMethod  = backUpLeadConfigData
            threadGroups = snappyThreads;

TASK       taskClass = io.snappydata.hydra.deployPackageJar.DeployPkgDeployJar taskMethod = HydraTask_deployPkgLocallyAndNiceKillLeadNode
           io.snappydata.hydra.cluster.SnappyPrms-jobClassNames = io.snappydata.hydra.deployPackageJar.DeployPkgXMLJob
           io.snappydata.hydra.cluster.SnappyPrms-appPropsForJobServer = "xmlFileLocation=${xmlFileLocation}"
           io.snappydata.hydra.cluster.SnappyPrms-userAppName = "xmlProcessing"
           io.snappydata.hydra.cluster.SnappyPrms-userAppJar = snappydata-store-scala-tests*tests.jar
           io.snappydata.hydra.cluster.SnappyPrms-isDeployPkg = true
           io.snappydata.hydra.cluster.SnappyPrms-jarIdentifier = "com.databricks:spark-xml_2.11:0.4.1"
           maxThreads = 1
           maxTimesToRun = 1
           threadGroups = snappyStoreThreads;
CLOSETASK  taskClass   = io.snappydata.hydra.cluster.SnappyTest taskMethod  = restoreLeadConfigData
           threadGroups = snappyThreads;

io.snappydata.hydra.cluster.SnappyPrms-waitTimeBeforeNextCycleVM = 120; //how long to wait before
//nodes will be cycled.
io.snappydata.hydra.cluster.SnappyPrms-cycleVms = true;

util.StopStartPrms-stopModes = NICE_KILL;
util.StopStartPrms-numVMsToStop = 1;

INCLUDE $JTESTS/io/snappydata/hydra/northwind/stopDualModeCluster.conf;


