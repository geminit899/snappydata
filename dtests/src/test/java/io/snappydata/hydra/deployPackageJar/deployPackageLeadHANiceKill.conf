hydra.Prms-testRequirement = "Test to deploy package and perform the NICEK KILL of leader node";
hydra.Prms-testDescription = "This is a good test case.
This test starts the snappy cluster in embedded mode. First deploy the package with comma delimited (multiple) packages.
We have used google GSon and Apache Avro library.
Test verifies lead HA functionality with deploy package (global deployment) command ";

INCLUDE $JTESTS/io/snappydata/hydra/northwind/startDualModeCluster.conf;

INITTASK    taskClass = util.StopStartVMs  taskMethod = StopStart_initTask
            threadGroups = snappyThreads, locatorThreads, snappyStoreThreads, leadThreads;

INITTASK    taskClass = io.snappydata.hydra.cluster.SnappyTest taskMethod = backUpLeadConfigData
            threadGroups = snappyThreads;

TASK       taskClass = io.snappydata.hydra.deployPackageJar.DeployPkgDeployJar taskMethod = HydraTask_deployPkgAndNiceKillLeadNode
           io.snappydata.hydra.cluster.SnappyPrms-jobClassNames = io.snappydata.hydra.deployPackageJar.DeployPkgCSVToJSON
           io.snappydata.hydra.cluster.SnappyPrms-appPropsForJobServer = "dataFilesLocation=${dataFilesLocation}"
           io.snappydata.hydra.cluster.SnappyPrms-userAppName = "CSVToJSONAndCSVToAVRO"
           io.snappydata.hydra.cluster.SnappyPrms-userAppJar = /export/shared/QA_DATA/deployJar/jars/CSVToJSON.jar
           io.snappydata.hydra.cluster.SnappyPrms-isDeployPkg = false
           maxThreads = 1
           maxTimesToRun = 1
           threadGroups = snappyStoreThreads;

CLOSETASK    taskClass = io.snappydata.hydra.deployPackageJar.DeployPkgDeployJar taskMethod  = HydraTask_deployPkgCSVToJSON_SnappyJob
             io.snappydata.hydra.cluster.SnappyPrms-jobClassNames = io.snappydata.hydra.deployPackageJar.DeployPkgCSVToJSON
             io.snappydata.hydra.cluster.SnappyPrms-appPropsForJobServer = "dataFilesLocation=${dataFilesLocation}"
             io.snappydata.hydra.cluster.SnappyPrms-userAppJar = /export/shared/QA_DATA/deployJar/jars/CSVToJSON.jar
             threadGroups = snappyThreads;

CLOSETASK  taskClass = io.snappydata.hydra.cluster.SnappyTest taskMethod = restoreLeadConfigData
           threadGroups = snappyThreads;

io.snappydata.hydra.cluster.SnappyPrms-waitTimeBeforeNextCycleVM = 120; //how long to wait before
//nodes will be cycled.
io.snappydata.hydra.cluster.SnappyPrms-cycleVms = true;

util.StopStartPrms-stopModes = NICE_KILL;
util.StopStartPrms-numVMsToStop = 1;

INCLUDE $JTESTS/io/snappydata/hydra/northwind/stopDualModeCluster.conf;